<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Constructor.

// true if player are ready.
self.m_players[0] = false;
self.m_players[1] = false;
self.m_players[2] = false;
self.m_players[3] = false;
self.m_player_lstick_on[0] = false;
self.m_player_lstick_on[2] = false;
self.m_player_lstick_on[3] = false;
self.m_player_lstick_on[3] = false;

self.m_nbReady = 0;

// eyebrows.
self.m_eyebrows[0] = s_eyebrow_0;
self.m_eyebrows[1] = s_eyebrow_1;
self.m_eyebrows[2] = s_eyebrow_2;
self.m_eyebrows[3] = s_eyebrow_3;
self.m_eyebrows[4] = s_eyebrow_4;
self.m_eyebrows[5] = s_eyebrow_5;
self.m_eyebrows[6] = s_eyebrow_6;
self.m_eyebrows[7] = s_eyebrow_7;

// players
self.m_players[0] = s_player1;
self.m_players[1] = s_player2;
self.m_players[2] = s_player3;
self.m_players[3] = s_player4;
self.m_player_masks[0] = s_player1_mask;
self.m_player_masks[1] = s_player2_mask;
self.m_player_masks[2] = s_player3_mask;
self.m_player_masks[3] = s_player4_mask;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>MenuCheckNewPlayer();

for(var index = 0; index &lt; MAX_PLAYER; index++)
{
    var player = g_playerManager.m_players[index];
    if(player != INVALID_PLAYER)
    {
        self.players[index] = UpdateMenuInput(player, id, index);        
        if(self.players[index])
        {
            self.m_nbReady++;
        }
    }
}

// goto next room.
if(self.m_nbReady == g_playerManager.m_nbPlayers)
{
    room_goto(r_game);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// draw the menu

// players
var maskIndex = shader_get_sampler_index(ColourMap, "u_sMask");
var colourParams = shader_get_uniform(ColourMap, "u_vColour");
        
for(var index = 0; index &lt; MAX_PLAYER; index++)
{
    var offsetx = 230 * index;
    
    var player = g_playerManager.m_players[index];
    if(player != INVALID_PLAYER)
    {
        var mask = sprite_get_texture(self.m_player_masks[index], 0);

        // retrieves color.
        var red = color_get_red(g_playerManager.m_colors[player.m_color]) / 255;
        var green = color_get_green(g_playerManager.m_colors[player.m_color]) / 255;
        var blue = color_get_blue(g_playerManager.m_colors[player.m_color]) / 255;

        // draw player sprite.        
        shader_set(ColourMap);
        shader_set_uniform_f(colourParams, red, green, blue, 1.0);
        texture_set_stage(maskIndex, mask);
        draw_sprite(self.m_players[index], 0, 55 + offsetx, 272);
        shader_reset();
        
        // draw eyebrow.
        if(player.m_eyebrow != INVALID_EYEBROW)
        {
            draw_sprite(self.m_eyebrows[player.m_eyebrow], 0, 146 + offsetx, 366);
        }
    }
    // draw press start.
    else
    {
        draw_sprite(s_press_start_01, 0, 45 + offsetx, 272);
        draw_sprite(s_press_start_02, 0, 45 + offsetx, 272 + sprite_get_height(s_press_start_01));
    }
}

// background
draw_sprite(s_menu_selection, 0, 0, 0);

// draw cursor.
// color: 198, 570
// eyebrow: 198, 
for(var index = 0; index &lt; MAX_PLAYER; index++)
{
    var player = g_playerManager.m_players[index];
    if(player != INVALID_PLAYER)
    {
        // config flip.
        var flipx = 1;
        if(index % 2)
        {
            flipx = -1;
        }
        var flipy = 1;
        if(index &gt; 1)
        {
            flipy = -1;
        }
        
        // config offset.
        var offsetx = 75 * (index % 2);
        var offsety = 0;
        if(index &gt; 1)
        {
            offsety = 75;
        }
        
        if(player.m_eyebrow == INVALID_EYEBROW)
        {
            draw_sprite_ext(s_selection, 0, offsetx + 198 + player.m_color * 84, offsety + 570, flipx, flipy, 0, c_white, 1);
        }
        else
        {
            draw_sprite_ext(s_selection, 0, offsetx + 198 + player.m_eyebrow * 84, offsety + 660, flipx, flipy, 0, c_white, 1);        
        }
    }    
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
